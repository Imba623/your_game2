# Браузерная игра «Твоя игра»

[[_TOC_]]

На этом этапе ваша задача — реализовать браузерную интеллектуальную игру в духе классических телевикторин. В вашей версии участники будут играть за одним компьютером, серверная часть не понадобится. Основной фокус — на игровой логике, удобстве интерфейса и чистой реализации.

# Механика игры

В игре два основных раунда и финал. Участники играют за одним компьютером.

## Начало игры

1. Участвуют три игрока.
2. Каждый вводит имя и получает свою клавишу на клавиатуре (например, A, L и пробел).
3. У всех стартовый счет 0.

После этого переходим к первому раунду.

## Основные раунды

На экране показано табло с темами и числами — стоимостью вопросов. В каждом раунде 6 тем по 5 вопросов.

Пример табло для первого раунда:

| Стартапы | 100 | 200 | 300 | 400 | 500 |
| --- | --- | --- | --- | --- | --- |
| Языки программирования | 100 | 200 | 300 | 400 | 500 |
| Мемы | 100 | 200 | 300 | 400 | 500 |
| Боги Древнего Египта | 100 | 200 | 300 | 400 | 500 |
| Художники | 100 | 200 | 300 | 400 | 500 |
| Математика | 100 | 200 | 300 | 400 | 500 |

Чем выше стоимость вопроса, тем он сложнее и тем больше очков можно заработать или потерять. В первом раунде вопросы стоят от 100 до 500 баллов, во втором — от 200 до 1 000 баллов.

Когда игрок выбирает клетку, открывается вопрос с выбранной темой и стоимостью. После того как вопрос сыгран, клетка больше не используется. Выбор вопроса выполняется кликом на соответствующую ячейку. Можно предусмотреть управление с помощью стрелок на клавиатуре.

Пример табло в середине раунда — часть вопросов уже открыли:

| Стартапы | 100 | 200 | 300 |  | 500 |
| --- | --- | --- | --- | --- | --- |
| Языки программирования | 100 |  |  | 400 | 500 |
| Мемы | 100 | 200 |  | 400 |  |
| Боги Древнего Египта |  |  |  |  |  |
| Художники |  |  | 300 |  | 500 |
| Математика | 100 | 200 | 300 | 400 | 500 |

- В начале игры право выбора вопроса дается первому игроку.
- В начале второго раунда — игроку с наименьшим числом баллов на счете.

Вопросы могут быть трёх типов: обычные, «Кот в мешке» и «Аукцион».

### Обычный вопрос

Когда игрок выбирает вопрос на табло, происходит следующее:

1. На экране появляется текст вопроса и запускается таймер (30 секунд).
2. Пока таймер тикает, любой игрок может нажать свою клавишу и таким образом захватить право ответа.
3. Отвечает тот, кто успел нажать на свою клавишу первым. На экране должно быть видно, кто это.
4. Игрок вводит ответ и видит результат:
   - **Если ответ правильный:**
     - К счету игрока **добавляется** стоимость вопроса (например, +300).
     - Игрок получает право выбрать следующий вопрос.
     - Вопрос закрывается, возвращаемся к табло.
   - **Если ответ неправильный:**
     - Из счета игрока **вычитается** стоимость вопроса (например, −300). Счет может уйти в минус.
     - Теперь шанс ответить появляется у других игроков — они могут нажать свою клавишу и дать ответ.
5. Если никто не ответил в течение 30 секунд (пока тикает таймер) или все игроки дали неправильные ответы, вопрос закрывается. Право выбрать вопрос остается у того же игрока, который выбрал этот вопрос.

### Специальные вопросы

Специальные типы вопросов **«Кот в мешке»** и **«Аукцион»** выпадают случайным образом, игроки не знают, при выборе какой клетки они попадутся. В каждом раунде по два специальных вопроса каждого типа.

#### Кот в мешке

Это вопрос-сюрприз с отдельной темой. Если попался «кот в мешке», логика следующая:

1. Игрок, открывший такой вопрос, выбирает, кому его передать.
2. Озвучивается тема вопроса, случайным образом выбранная из банка тем и не совпадающая с темами на табло.
3. Игрок, получивший «кота в мешке», делает ставку: в первом раунде — 100 или 500, во втором — 200 или 1 000.
4. Открывается текст вопроса.
5. Игрок вводит ответ. Другие игроки не могут участвовать.
6. Если игрок ответил правильно, к его счету добавляется сумма ставки. Если игрок дал неправильный ответ или не смог ответить, ставка вычитается из счета.
7. Игрок, получивший «кота», получает право выбора следующего вопроса.

#### Аукцион

Вопрос-аукцион разыгрывается по следующим правилам:

1. Если открылся вопрос-аукцион, игроки по очереди делают ставки, пока не определится победитель. Минимальная ставка — номинал вопроса на табло, максимальная — сумма на счете игрока.
2. Если игрок идет ва-банк, то есть ставит всю сумму на своем счете, другие игроки могут перебить такую ставку, только сделав то же самое.
3. На вопрос отвечает игрок, сделавший наибольшую ставку. Интерфейс подсвечивает, кто отвечает.
4. Открывается вопрос.
5. Игрок дает ответ. Если он правильный, игрок выигрывает количество баллов, равное своей ставке. Если неправильный — проигрывает такое же количество баллов.
6. Право хода остается у игрока, отвечавшего на вопрос аукциона.

**Пример розыгрыша:**

У Саши 300 баллов, у Вани 500 баллов, у Алисы 1 000 баллов. Номинал вопроса — 100 баллов.

- Саша ставит 200.
- Ваня ставит 300. Саша больше не сможет перебить ставку, так как у него всего 300 баллов.
- Алиса ставит 400.
- Ваня ставит 500 (ва-банк).
- Алиса может пойти ва-банк (ставка — 1 000) либо вопрос достается Ване.

Раунд завершается после розыгрыша последнего вопроса на табло. По его окончании отображается экран итогов с текущим счетом и кнопкой перехода к следующему раунду.

В финальном раунде участвуют игроки, набравшие положительное количество баллов по итогам второго раунда. Если таких игроков нет, игра завершается.

## Финальный раунд

1. Озвучивается тема финала.
2. Игроки делают секретные ставки от 1 до суммы на счете игрока.
3. Так как игроки находятся за одним компьютером, финальный раунд проходит по очереди:
   - Сначала играет первый игрок. Он подтверждает готовность в интерфейсе. К этому времени другие игроки должны выйти или отвернуться.
   - Открывается вопрос, и запускается таймер на 60 секунд.
   - Игрок отвечает.
   - Его ответ и вопрос скрываются.
   - Затем всё повторяется для второго и третьего игрока (если они участвуют в финальном раунде).
4. Когда все игроки ответили, раскрываются их ответы и правильный ответ.
5. Обновляется счет каждого участника.
6. Побеждает игрок, заработавший больше всего баллов.

# Система оценки

В этом туре ваши проекты будет проверять команда экспертов вручную. Максимальный результат — 100 баллов, которые складываются из оценок в четырёх категориях. Описание категорий вы найдёте в следующих разделах этого документа.

| **Категория** | **Максимум баллов** |
| --- | --- |
| Основные фичи | 65 |
| Экстрафичи | 20 |
| Технические критерии | 10 |
| Общее впечатление эксперта | 5 |

**Чтобы ваша работа была проверена, необходимо выполнить два условия:**

1. Приложение должно собирать статику в папку `public` командой `npm run build`.
2. Приложение должно запускаться командой `npm ci && npm start` на Node.js версии LTS. Если приложение таким образом не запускается, оценка в категориях «Технические критерии» и «Общее впечатление эксперта» будет 0.

**Защита проекта:**

После завершения работы над проектом вы будете приглашены на встречу с экспертами с помощью средств видеоконференцсвязи. В ходе встречи вам будут заданы уточняющие вопросы, проверяющие ваши знания и понимание собственного проекта.

В процессе эксперт может попросить показать какое-либо место в коде, внести в него правки или продемонстрировать какой-то функционал проекта — будьте готовы включить демонстрацию экрана с кодом или деплоем.

Если в процессе встречи вам не удастся ответить на вопрос эксперта, связанный с одним из оцениваемых разделов, то балл за весь раздел будет обнулен. Список разделов:

- Подготовка игры
- Предустановленные пакеты тем и вопросов
- Игровое табло и механика основных раундов
- Режим ответа на вопрос
- Финальный раунд
- Dev-mode
- Экстрафичи
- Технические критерии

# Основные фичи (максимум 65 баллов)

В скобках указана максимальная оценка за каждую фичу. В зависимости от качества и точности реализации может быть начислена часть баллов.

Игра должна корректно работать в актуальных версиях браузеров на десктопе.

## 1. Подготовка игры (максимум 5 баллов)

Пользователь должен иметь возможность:

- Ввести имена игроков (добавить адекватную валидацию ввода — игрок не должен ввести пустую или слишком длинную строку).
- Видеть в интерфейсе клавишу для ответа, которая назначается каждому игроку.

## 2. Предустановленные пакеты тем и вопросов (максимум 5 баллов)

Игра должна быть готова к использованию сразу после запуска, поэтому её нужно предзаполнить контентом.

**Минимальные** требования к предустановленному контенту:

- Вопросов должно быть достаточно, чтобы полностью сыграть игру: 2 обычных раунда, 4 вопроса для «Кота в мешке», один финальный вопрос.
- В каждом обычном раунде должно быть 6 тем, а в каждой теме — 5 вопросов.
- Вопросы не должны быть полностью одинаковыми. Контент может быть любым, но не копируйте один и тот же текст или совсем рандомные строки: это затруднит проверку, испортит общее впечатление и приведёт к более низким баллам.
- Темы не должны повторяться ни в рамках одного раунда, ни между раундами. Например, не может быть так, что одна тема и те же вопросы используются и в первом, и во втором раунде.

## 3. Игровое табло и механика основных раундов (максимум 20 баллов)

Во время основных раундов:

- Игроки видят текущие очки каждого игрока, клавиши для ответа каждого игрока, игровое табло с 6 темами по 5 вопросов в каждом.
- Стоимость вопросов должна расти от 100 до 500 в первом раунде, от 200 до 1 000 во втором.
- Сыгранные вопросы должны исчезать с табло и быть недоступными для выбора.
- В режиме выбора вопроса должно быть показано, кто из игроков выбирает вопрос.
- Право выбора вопроса должно корректно передаваться между игроками:
  - в начале игры вопрос выбирает первый игрок;
  - в начале второго раунда — игрок с меньшим счетом;
  - в середине раунда — игрок, правильно ответивший на последний вопрос, либо тот, кто отвечал на специальный вопрос (подробнее см. в разделе «Механика игры»).
- После выбора вопроса игра переходит в режим показа вопроса.
- Переходы между раундами должны быть явными:
  - экран завершения раунда с текущими очками;
  - кнопка перехода в следующий раунд;
  - в начале каждого раунда должно быть понятно, что начался новый этап (показан заголовок, номер раунда, меняется табло).
- **Состояние игры должно сохраняться и восстанавливаться после обновления страницы.**

## 4. Режим ответа на вопрос (максимум 20 баллов)

- При открытии обычного вопроса на экране показан текст вопроса (при необходимости — картинки или другой контент).
- Одновременно запускается таймер на 30 секунд.
- Также должны быть видны тема вопроса и подсказки с назначенными игрокам клавишами.
- Игроки могут захватить право ответа, нажав выделенную клавишу на клавиатуре.
- Интерфейс подсвечивает, кто отвечает.
- Игрок может ввести ответ в поле для ввода.
- Правильно обрабатывается правильный ответ: начисляются баллы, возвращаемся в режим табло.
- Правильно обрабатывается неправильный ответ: вычитаются баллы, если не все игроки потратили попытку ответить, снова запускается таймер.
- Игрок не может отвечать на вопрос повторно.
- **Состояние игры должно сохраняться и восстанавливаться после обновления страницы для любого этапа и типа вопроса.**

### Кот в мешке

- При открытии вопроса типа «Кот в мешке» интерфейс подсказывает, что это особенный тип вопроса.
- Игрок, открывший вопрос, выбирает, кому передать вопрос.
- Открывается тема вопроса, не совпадающая с темами раунда.
- Игрок делает ставку. В первом раунде — 100 или 500, во втором — 200 или 1 000.
- Открывается текст вопроса.
- Игрок отвечает, обрабатывается ответ, начисляются или вычитаются баллы.

### Аукцион

- При открытии вопроса типа «Аукцион» интерфейс подсказывает, что это особенный тип вопроса.
- Реализован механизм ставок (см. раздел «Механика игры»).
- Когда закончатся раунды ставок, интерфейс подсказывает, кто отвечает.
- Открывается текст вопроса.
- Игрок отвечает, обрабатывается ответ, начисляются или вычитаются баллы.

## 5. Финальный раунд (максимум 10 баллов)

- В раунде участвуют только игроки с положительной суммой на счете, это должно быть отражено в интерфейсе.
- Оглашается тема раунда.
- Каждый игрок делает ставку в диапазоне от 1 до своего текущего счета. Ставки должны быть тайными: игроки вводят их по очереди, после ввода и подтверждения ставка скрывается. Пока один игрок вводит ставку, другие должны отвернуться или отойти.
- После ставок по очереди для каждого игрока показывается финальный вопрос и запускается таймер.
- Чтобы игроки успели поменяться местами, показ вопроса и запуск таймера происходят путём нажатия кнопки подтверждения готовности.
- Когда все ответили, открывается правильный ответ и ответы игроков, обновляется счет каждого игрока:
  - если ответ верный, к счету добавляется ставка;
  - если неверный, ставка вычитается.
- После финала показывается экран результатов: победитель и итоговые очки.

## 6. Dev-mode (максимум 5 баллов)

Чтобы упростить экспертам проверку, рекомендуется реализовать dev-mode, который можно включить в интерфейсе. При переходе в dev-mode надо:

- Подсвечивать на табло, в каких ячейках скрыты вопросы специального типа «Кот в мешке» и «Аукцион».
- В режиме вопроса показывать правильный ответ рядом с полем ввода.
- Менять счет игроков на любом этапе для проверки разных исходов аукциона и финального раунда.
- Можно добавить иные полезные для тестирования функции на усмотрение участника, если это поможет экспертам проверить дополнительные фичи.

# Экстрафичи (максимум 20 баллов)

Ниже приведён список возможных дополнительных фич. Реализующий должен выбрать фичи из этого списка. Максимум за экстрафичи — 20 баллов в зависимости от объёма и сложности проделанной работы. Экстрафичи также должны быть описаны в README, чтобы экспертам было легче их найти, иначе фича не будет засчитана.

В скобках указано максимальное количество баллов за фичу. В зависимости от объёма работы и качества реализации может быть начислена часть баллов.

- **Персонажи игроков** (максимум 2 балла)  
  Перед началом игры участник может выбрать аватар или загрузить своё изображение, которое отображается рядом с его именем и счетом и сохраняется в течение игровой сессии.

- **Настройка персонажа** (максимум 3 балла)  
  Игрок может настраивать внешний вид персонажа: менять цвета, добавлять аксессуары, выбирать рамку аватара и фон карточки и тому подобное. Выбор готового аватара из раздела «Персонажи игроков» не считается настройкой.

- **Монеты за победу и магазин** (максимум 4 балла)  
  После игры победитель получает монеты, которые накапливаются и сохраняются для следующих партий. Их можно тратить в магазине на новых персонажей, аксессуары и элементы оформления. Купленные предметы закрепляются за игроком и остаются доступными в будущем, в том числе после перезагрузки страницы.

- **Сохранение профилей игроков** (максимум 2 балла)  
  Игроки могут создавать и сохранять локальные профили с именем, выбранным персонажем и купленными предметами. При запуске новой игры можно выбрать существующий профиль или создать новый. Профили сохраняются между сессиями и при необходимости могут быть удалены.

- **Статистика игр** (максимум 3 балла)  
  Система сохраняет историю сыгранных партий и ведёт статистику, которую можно посмотреть в интерфейсе. Статистика сохраняется при перезагрузке страницы.

- **Импорт и экспорт пакетов вопросов** (максимум 4 балла)  
  Пользователь может сохранять текущий набор вопросов в файл и загружать новые наборы из файла. При загрузке выполняется проверка формата и содержимого, а при ошибках показывается понятное сообщение. Также можно хранить несколько наборов и переключаться между ними.

- **Редактор тем и вопросов** (максимум 5 баллов)  
  В игре есть встроенный редактор, позволяющий добавлять новые темы и вопросы.

- **Улучшенная проверка ответа** (максимум 3 балла)  
  Проверка ответов реализована с учётом возможных неточностей: разной формулировки правильного ответа, регистра, опечаток и тому подобного.

- **Звуки** (максимум 3 балла)  
  Добавь озвучку ключевых событий игры, таких как ввод правильного и неправильного ответа, окончание времени на ответ, выпадение специальных типов вопросов и тому подобное. Приветствуется возможность отключить звук или настроить его громкость.

- **Озвучка вопросов** (максимум 2 балла)  
  При открытии вопроса текст может озвучиваться (зачитываться) голосом. Приветствуется возможность отключить озвучку или другие настройки.

- **Настройка числа игроков** (максимум 3 балла)  
  Перед началом игры можно настроить число игроков — от двух до разумного максимума. Список игроков корректно связывается с остальными функциями: профилями, аватарами и статистикой.

- **Голосовое распознавание ответов игроков** (максимум 4 балла)  
  Игрок может отвечать голосом, а ответы корректно распознаются и подставляются в поле ответа.

- **Поддержка вопросов с фото и видео** (максимум 3 балла)  
  Вопросы могут содержать не только текст, но и медиа: изображение или видео, которые показываются при открытии вопроса. Фича должна быть корректно интегрирована с другими связанными фичами при их наличии (редактором вопросов, импортом и экспортом).

- **Онбординг в игре** (максимум 3 балла)  
  При первом запуске отображается интерактивный онбординг, который пошагово знакомит с интерфейсом.

- **Темная тема и смена тем оформления** (максимум 1 балл)  
  Интерфейс поддерживает несколько тем оформления и возможность переключаться между ними.

- **Анимации** (максимум 2 балла)  
  Более живой интерфейс с анимацией выбора ячейки, открытия вопроса и других ключевых действий.

- **Новый тип специальных вопросов** (максимум 1 балл)  
  Поддержка другой механики особых вопросов с особенной логикой розыгрыша, начисления баллов и оформлением.

- **Генератор мемов по итогам игры** (максимум 3 балла)  
  После завершения игры показываются анимированные финальные титры в стиле фильма: имена игроков по очереди прокручиваются на экране с шуточными комментариями о том, как прошла их игра. Описание формируется динамически на основе статистики: победитель, рекорд по ошибкам, рискованные ставки, неожиданные успехи и так далее.

- **Поддержка перевода интерфейса** (максимум 2 балла)  
  В игре есть переключение языка интерфейса (русский/английский). После смены языка все тексты должны переключиться на выбранный язык без перезагрузки страницы.

- **Реакция ведущего на ввод ответов** (максимум 2 балла)  
  В игре появляется виртуальный ведущий с именем и аватаром, который сопровождает процесс репликами (текстом или голосом). Он реагирует на ключевые события: начало игры, правильный и неправильный ответ, затянувшуюся паузу, аукцион, «кота в мешке», смену раунда и финал.  
  Для каждой ситуации предусмотрен набор разнообразных фраз (не менее 5), которые появляются в нужный момент.

# Технические критерии (максимум 10 баллов)

За соблюдение следующих критериев вам будут начислены дополнительные баллы:

- **Дизайн-система.** Используйте переменные (CSS variables, или SCSS variables, или другие технологии) для обеспечения единообразия внешнего вида приложения (цветов, шрифтов, отступов и так далее). Стили должны быть последовательными и организованными. Приложение должно легко адаптироваться к изменениям внешнего вида.
    
- **Корректная верстка.** Верстка должна быть структурированной, семантически правильной и учитывать принципы доступности. Используйте соответствующие HTML5-теги для обозначения частей страницы и контента (header, nav, main, footer, article и так далее). Добавьте атрибут `alt` к изображениям, необходимым для понимания контента. Обеспечьте контрастность контента, хорошую читаемость текста.
    
- **Валидация данных.** Обеспечьте надежную валидацию пользовательского ввода на клиенте. Предотвращайте ввод некорректных данных и отображайте информативные сообщения об ошибках. Например, если поле должно содержать число, добавьте проверку, что введено именно число.
    
- **Архитектурная документация.** Приложение должно быть логически структурировано, с четким разделением на модули и компоненты, что должно быть отражено в документации. Опишите структуру вашего приложения в документации (README.md или architecture.md), объясните, как различные части взаимодействуют друг с другом. Включите информацию о роутинге.
    
- **Тестирование.** Напишите тесты на Playwright, покрывающие ключевую бизнес-логику приложения. Минимальное требование — 1 интеграционный тест на каждую основную фичу. Тесты должны проходить успешно.
    
- **Качественные коммиты.** Делайте частые и осмысленные коммиты с понятными сообщениями, соответствующими стандарту Conventional Commits. Разбивайте большие изменения на небольшие, логичные коммиты.
    
- **Нет неиспользуемого кода.** Удалите неиспользуемые переменные, функции, импорты и компоненты.
    
- **Нет дублирования кода.** Избегайте повторения кода (более 30 строк). Используйте общие компоненты и функции для переиспользования логики.
    
- **Длина файлов.** Разбивайте код на файлы разумной длины (не более 150 строк).
    
- **Цикломатическая сложность.** Стремитесь к минимальной цикломатической сложности функций (не более 10). Избегайте сложных конструкций и глубокой вложенности.

# Технические требования

1.  Приложение должно быть задеплоено с использованием GitLab Pages. Деплои на сторонних платформах проверяться не будут.
    
2.  Приложение должно легко запускаться локально, см. раздел «Система оценки».
    
3.  Можно использовать любой JS-фреймворк, также можно писать на TypeScript. Flutter, PHP и другие языки и фреймворки, которые не попадают в категорию JS/TS, использовать нельзя.
    
4.  Можно использовать любые NPM-библиотеки, включая библиотеки компонентов. Но руководствуйтесь здравым смыслом и не тащите в проект лишнее.
    
5.  Бэкенд делать не надо. Но если вы его все же сделали, он должен быть задеплоен и легко подниматься локально. Если бэкенд упал, не задеплоился, эксперты не смогли его поднять локально, вы потеряете баллы из-за проблем с функционалом. Подумайте, так ли он вам нужен.
    
6.  Авторизацию делать не надо. Это затруднит экспертам проверку.
    
7.  Запрещено сдавать чужие проекты или их форки.